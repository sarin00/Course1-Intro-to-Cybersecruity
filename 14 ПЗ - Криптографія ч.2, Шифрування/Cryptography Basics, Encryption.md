## 1. Вступ

Шифрування - це процес перетворення даних у такий вигляд, коли суть цих даних повністю приховується. Шифрування завжди має бути зворотнім, щоб приховане повідомлення можна було повернути в його оригінальний вигляд. Шифрування використовує ключ для зміни повідомлення, і може бути симетричним чи асиметричним. Ключ також необхідний для розшифрування повідомлення.  

У простому вигляді шифрування можна розділити на такі типи:  
![Шифрування](https://github.com/sarin00/Course1-Intro-to-Cybersecruity/blob/main/%D1%8F%D0%94%D0%BE%D0%B4%D0%B0%D1%82%D0%BA%D0%BE%D0%B2%D1%96%20%D0%BC%D0%B0%D1%82%D0%B5%D1%80%D1%96%D0%B0%D0%BB%D0%B8/encr.png)

## 2. Симетричне шифрування
Симетричне шифрування - це алгоритми шифрування, які майже завжди використовують один і той самий ключ як для шифрування, так і для розшифрування даних. Перевагою симетричних алгоритмів є швидкість, бо асиметричні алгоритми займають більше часу на розрахунок. Симетричні алгоритми шифрування, або шифри, діляться на блочні та потокові.  

Недолік симетричного шифрування очевидний - для того щоб безпечно комунікувати, обидві сторони мають знати один і той самий ключ, але як його передати по незахищеному каналу якщо цей ключ комунікації і має утворити захищений канал? Саме тому сучасні системи безпеки даних використовують різні криптографічні системи разом для оптимальної швидкості та безпеки, щоб використати сильні сторони алгоритмів та нівелювати слабкі.

### 2.1 Блочні шифри
Блочні шифри використовують один і той самий ключ для шифрування та розшифрування даних. Але самі дані що зашифровуються розбиваються на блоки, і шифруються саме блоки. Звідти і назва - блочні шифри. В сухому вигляді блочний шифр - це схема шифрування одного блоку. Для того щоб зашифровувати кілька блоків, тобто багато даних, потрібен "режим роботи шифра". Режим роботи - це по суті інструкція як переходити від зашифрування одного блоку до зашифрування наступного, і так допоки блоки даних не закінчаться. Режими ці не однакові, вони мають різну стійкість.  

Коли ми кажемо про блочний шифр, у вашій голові одразу має сплисти назва `AES`. AES (Advanced Encryption Standard) - це блочний шифр, який є державним стандартом симетричного шифрування у США. Для обрання найкращого блочного шифру було проведено цілий конкурс. AES добре описаний та протестований. Хоча це не єдиний блочний шифр який існує, це найкращий варіант який рекомендується використовувати. DES в усіх його версіях застарілий і слабкий, забудьте про це сімейство шифрів. Через стандартизацію AES у вас ніколи не буде проблем з аудиторами якщо ви використаєте саме AES, головне обрати правильний режим роботи (AES-GCM, AES-CTR, де CTR це потоковий режим, чи AES-CBC, де CBC це блочний режим роботи).  

Ми не будемо вдаватись в математику блочного шифру, адже вам навряд чи доведеться реалізовувати цей шифр самостійно. Тим не менш, просто знайти що AES робить багато змін над оригінальним текстом (операції XOR, S-матриці, функції переміщення, тощо).  

### 2.2 Потокові шифри
Потокові шифри теж використовують один ключ для зашифровки та розшифровки тексту, але замість розділення даних на блоки вони зашифровують повідомлення побітово (іноді побайтово). Хоча вони працюють швидше за блочні шифри, потокові шифри дуже відрізняються один від одного, набагато менше досліджені, мають специфічні недоліки, через що більшість систем віддають перевагу блочним шифрам. Деякі популярні потокові шифри, як RC4 наприклад, мають відомі слабкості і не рекомендуються до використання. При реалізації потокових шифрів та режимів роботи треба бути дуже обережними та уважними, адже сильний алгоритм перетворюється на слабкий при невеликих помилках (наприклад повторне використання оказії - nonce). Якщо вам вже треба використати потоковий шифр - краще взяти AES у режимі GCM чи CTR (це потокові режими роботи). 

### 2.3 Режими роботи шифрів
Як вказувалось раніше, режим роботи блочного шифру потрібен для того щоб зашифровувати інформацію що займає більше ніж 1 блок. Ми не будемо вдаватись у деталі, а просто коротко опишемо режими та висновки по ним:
1. `ECB` - ніколи не використовуйте цей режим! Кожен блок зашифровується незалежно від іншого, через що 2 однакових блоків інформації  в зашифрованому вигляді виглядатимуть ідентично. Інформація повторюється набагато частіше ніж ми думаємо, наприклад в більшості UNICODE строк кожен другий байт є нульовим, а багато форматів файлів мають однакові байти з описом цього формату.
2. `CBC` - це наш вибір №3. Блоки відкритого тексту складаються по XOR з минулим блоком шифрованого тексту, що виправляє помилку ECB. Це дуже надійний режим роботи, який трохи повільніший за CTR.
3. `OFB` - це поточний режим роботи шифру. Хоча це швидкий режим роботи, OFB страждає від проблеми повторної оказії навіть більше за інші потокові режими. OFB програє режиму CTR по безпеці та кількох інших аспектах, тому для потокового режиму краще обрати CTR.
4. `CTR` - це наш вибір №2. Потоковий режим роботи, він працює швидше за CBC, і поступається CBC тільки у надійності в разі перевикористання оказії.  
5. `GCM` - це наш вибір №1. Найпопулярніший режим роботи на даний час, `GCM` використовує `CTR` режим для безпосереднього шифрування тексту, і додатково розраховує "тег автентифікації", по-суті MAC(message authentication code), математикою поля Галуа. Це дає можливість не тільки зашифрувати текст, а і впевнитись в тому що його ніхто не змінив в процесі передачі даних. 

## 3. Асиметричне шифрування
Асиметричні алгоритми шифрування використовують пару ключів, публічний та приватний, для своїх операцій. Ці ключі створюються разом і математично повʼязані один з одним. Коли дані зашифровуються одним ключем, то розшифруватись вони можуть тільки другим ключем. В асиметричних алгоритмах шифрування неможливо використати один і той самий ключ для шифрування та розшифрування. Публічний ключ використовується для шифрування тексту, а приватний для його розшифрування. Однак, алгоритми цифрового підпису міняють ключі місцями і вирішують іншу проблему, але про це в наступних заняттях.  

Алгоритмів асиметричного шифрування є декілька, але в роботі ми будемо стикатись тільки з RSA та ECC.  

В своїй основі асиметричні алгоритми використовуються різні математичні аппарати. Ці апарати мають властивості які дозволяють дуже просто розраховувати ключі та шифрувати текст, але вимагають величезних зусиль щоб розрахувати приватний ключ з публічного. Ця математична магія може базуватись на складності факторизації (RSA, Rabin), на проблемі дискретного логарифму (ElGamal), на проблемі subset sum. Всі перечислені апарати проводять математичні операції над цілими числами. Криптографія на еліптичних кривих (ECC - Elliptic Curve Cryptography) працює не з цілими числами, а з точками на еліптичній кривій, що робить ECC набагато надійнішими і швидшими. Тому існує алгоритм DSA, а існує його версія над Еліптичними Кривими ECDSA, так само DH та ECDH. 

### 3.1 Порівняння ECC з RSA
Для того щоб досягти рівень криптостійкості в 128 біт, ECC знадобиться ключ розміром в 256 біт, в той час як RSA знадобиться ключ розміром в 3072 біти. Для рівню криптостійкості в 256 біт, ECC знадобиться ключ в 521 біт, а RSA - ключ в 15360 біт.  
Нема сенсу використовувати RSA з величезним ключем, якщо ECC з сильно меншим ключем дає більший рівень безпеки. Це той самий випадок коли розмір - не показник! 

## 4. Що таке рівень криптостійкості?
Рівень криптостійкості - це цифровий показник криптостійкості криптографічного алгоритму, пов'язаний з обчислювальною складністю виконання успішної атаки на криптосистему найшвидшим із відомих алгоритмів. По-суті, ця цифра вказує скільки операцій треба буде виконати щоб взламати конкретний алгоритм. Наприклад, для системи з рівнем безпеки в 128 біт треба буде виконати 2^128 операцій, тобто 3.4 * 10^38. З більшістю алгоритмів які ми використовуємо, більший розмір ключа означає більший рівень криптостійкості, але як ми побачили у порівнянні ECC з RSA, самі по собі алгоритми мають різну стійкість.

## 5. Висновки
Все просто - в будь якій ситуації де потрібна асиметрична криптографія (не тільки шифрування) використовуйте алгоритми з Еліптичними Кривими. 

## 6. Додаткові матеріали
1. [Asymmetric encryption](https://www.practicalnetworking.net/series/cryptography/asymmetric-encryption/)
2. [Symmetric encryption](https://www.practicalnetworking.net/series/cryptography/symmetric-encryption/)
